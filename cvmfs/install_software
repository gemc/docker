#!/bin/zsh -i

# argument is gemc versions (tag separated),  SIM_HOME and what to install (sim or gemc)

# split tags from first argument which is dash-separated tags
# e.g. 4.4.2-5.1  will give 4.4.2 and 5.1

tags=(${(s/-/)1})

if [[ $# -eq 3 ]]; then

	export SIM_HOME=$2
	what=$3

	. $SIM_HOME/ceInstall/setup.sh
	export TERM=${TERM:-xterm}


	for g in $=tags
	do
	  # sim version from gemc_version
	  if [[ $g == "4.4.2" || $g == "5.1" ]]; then
		  sim_version="2.4"
	  fi

	  # if what is sim, install_sim, else if it's gemc use install_gemc
	  if [[ $what == "sim" ]]; then
		  echo " > Installing sim version $sim_version - SIM_HOME is $SIM_HOME"
		  install_sim $sim_version
	  elif [[ $what == "ctag" ]]; then
		  echo " > Installing clas12Tag $g - SIM_HOME is $SIM_HOME"
	    install_gemc $g
	  fi

	done


fi


